<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Untitled</title>
  

</head>
<body>
<!-- partial:index.partial.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>birraker Investment </title>
  <style>
    /* Full-screen background */
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      background: url('https://assets.onecompiler.app/438xks8y6/43bnmtarn/1000006631.webp') no-repeat center center fixed;
      background-size: cover;
    }
    /* Container with a white overlay for readability */
    .container {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      background: rgba(255, 255, 255, 0.95);
      padding-bottom: 80px;
      position: relative;
    }
    h1, h2, h3 { color: #2a2a72; margin: 10px 0; }
    .home-description { font-weight: bold; color: #ff4d4d; }
    button {
      background: #ff4d4d;
      border: none;
      color: white;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 16px;
      border-radius: 4px;
      transition: background 0.3s;
    }
    button:hover { background: #e60000; }
    .error { color: red; font-weight: bold; margin-top: 10px; }
    /* Section styling */
    .section {
      padding: 20px;
      margin: 20px;
      background: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .hidden { display: none; }
    /* Countdown styling */
    #countdown {
      font-size: 2rem;
      font-weight: bold;
      color: #ff4d4d;
      text-align: center;
      margin: 20px 0;
    }
    /* Fixed bottom navigation */
    nav {
      position: fixed;
      display: none;
      bottom: 0;
      left: 0;
      right: 0;
      background: #2a2a72;
      height: 60px;
      display: flex;
      justify-content: space-around;
      align-items: center;
      z-index: 1000;
    }
    nav button {
      flex: 1;
      margin: 0;
      background: #ff4d4d;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 60px;
      font-size: 16px;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }
    nav button:hover { background: #e60000; }
    /* Product card styling */
    .product {
      background: #fff;
      padding: 10px;
      border: 1px solid #eee;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }
    .product img {
      width: 100%;
      max-height: 150px;
      object-fit: cover;
      border-radius: 4px;
      margin-bottom: 10px;
    }
    .product h4 { margin: 5px 0; font-size: 1.2em; }
    .product p { margin: 5px 0; font-weight: bold; font-size: 1em; }
    /* Intro Animation (Video) Styles for My Product Page */
    #myProductIntroAnimation {
      position: relative;
      width: 100%;
      max-height: 250px;
      overflow: hidden;
    }
    #myProductIntroAnimation video {
      width: 100%;
      display: block;
    }
    #myProductIntroAnimation .video-overlay {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: #fff;
      font-size: 24px;
      font-weight: bold;
      text-shadow: 2px 2px 4px #000;
    }
    /* Modal styling */
    .modalOverlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modalContent {
      background: white;
      padding: 20px;
      border-radius: 8px;
      width: 300px;
      text-align: center;
    }
    .modal-input {
      background-color: #000;
      color: #fff;
      font-weight: bold;
      padding: 8px;
      border: 1px solid #4CAF50;
      border-radius: 4px;
      width: 100%;
      box-sizing: border-box;
    }
    .withdraw-input {
      background-color: #000;
      color: #fff;
      font-weight: bold;
      padding: 8px;
      border: 1px solid #4CAF50;
      border-radius: 4px;
      width: 100%;
      margin: 5px 0;
      box-sizing: border-box;
    }
    input::placeholder { font-weight: bold; color: #4CAF50; }
    .blurred { filter: blur(4px); }
    #accountNumber { font-weight: bold; }
    /* My Page Menu */
    .menuItem { margin: 10px 0; }
    .menuItem button {
      width: 100%;
      margin-bottom: 5px;
      text-align: left;
      background: #2a2a72;
    }
    .menuContent {
      padding: 10px;
      background: #f9f9f9;
      border-radius: 4px;
      display: none;
    }
    .menuContent.show { display: block; }
    /* Forms styling */
    #signupForm input, #loginForm input {
      padding: 10px;
      margin: 5px 0;
      width: 90%;
      display: block;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    /* Home page images and descriptions */
    .image-row {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 10px;
    }
    .image-row img { width: 45%; border-radius: 8px; }
    .row-description {
      text-align: center;
      font-weight: bold;
      color: #4CAF50;
      margin: 5px 0 15px 0;
    }
    /* Product Section Layout */
    #productSection {
      background: linear-gradient(135deg, #b3ffab, #12fff7);
      border-radius: 8px;
      padding: 20px;
    }
    #productSection h2 { color: #2a2a72; }
    #productList {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 10px;
    }
    /* My Product Section */
    #myProductSection {
      background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7));
      color: white;
      border-radius: 8px;
      padding: 20px;
    }
    /* Bank dropdown */
    #withdrawBank {
      font-weight: bold;
      color: #4CAF50;
      border: 1px solid #4CAF50;
      border-radius: 4px;
      padding: 8px;
      background: #000;
      width: 100%;
      margin: 5px 0;
    }
    /* Copy button */
    #copyAccount {
      display: inline-block;
      font-size: 12px;
      padding: 2px 5px;
      background: #4CAF50;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      margin-left: 5px;
    }
    #copyAccount:hover { background: #45a049; }
    /* Green buttons */
    #confirmWithdraw,
    #contactSupportBtn,
    #toggleAccountDetails { background: #4CAF50; }
    #confirmWithdraw:hover,
    #contactSupportBtn:hover,
    #toggleAccountDetails:hover { background: #45a049; }
    /* Logout button */
    #logoutBtn { background: red; }
    #logoutBtn:hover { background: darkred; }
    .modalContent p strong { color: #4CAF50; }
    /* Home page contact icons */
    .contact-icons a {
      text-decoration: none;
      margin: 0 10px;
      display: inline-block;
    }
    .contact-icons img { width: 30px; vertical-align: middle; }
    /* Auth page Telegram icon */
    #authTelegram {
      margin-top: 20px;
      text-align: center;
    }
    #authTelegram a { text-decoration: none; color: #ff4d4d; font-weight: bold; }
    #authTelegram img { width: 30px; vertical-align: middle; }
    /* Social icons under Logout */
    .social-icons {
      text-align: center;
      margin-top: 20px;
    }
    .social-icons a { margin: 0 10px; display: inline-block; }
    .social-icons img { width: 30px; }
  </style>
</head>
<body>

  <!-- Intro Section -->
  <div id="introSection" class="section">
    <h2>Welcome Intro</h2>
    <p style="font-weight:bold; color:#ff4d4d;">
      ይህ ፕላትፎርም የተሰራበት አላማ የኢትዮጵያን ህዝብ ያማከለ የገንዘብ ብክነትን አስቀርቶ የተሻለ ቁጠባ የሚሰጥ ፕላትፎርም ነው።
    </p>
    <p>Get ready to explore our platform after the countdown!</p>
    <div id="countdown">5</div>
  </div>

  <!-- Main Container -->
  <div class="container hidden" id="mainContainer">
    <!-- Authentication Section -->
    <div id="authSection" class="section">
      <h1 style="color:#2a2a72;">Welcome to the Investment Platform</h1>
      <!-- Sign Up Form -->
      <form id="signupForm">
        <h3 style="color:#ff4d4d;">Sign Up</h3>
        <input type="tel" id="signupPhone" placeholder="Phone Number (e.g., 09XXXXXXXX)" required />
        <input type="password" id="signupPassword" placeholder="Create a Password (min 6 characters)" required />
        <input type="password" id="signupConfirmPassword" placeholder="Confirm Password" required />
        <button type="submit">Sign Up</button>
        <div id="signupError" class="error"></div>
        <p style="margin-top:10px;">Already have an account? 
          <button type="button" id="switchToLogin" style="background:none; border:none; color:#ff4d4d; text-decoration:underline; cursor:pointer;">Sign In</button>
        </p>
      </form>
      <!-- Sign In Form -->
      <form id="loginForm" class="hidden">
        <h3 style="color:#ff4d4d;">Sign In</h3>
        <input type="tel" id="loginPhone" placeholder="Phone Number (e.g., 09XXXXXXXX)" required />
        <input type="password" id="loginPassword" placeholder="Enter your Password" required />
        <button type="submit">Sign In</button>
        <div id="loginError" class="error"></div>
        <p style="margin-top:10px;">Don't have an account? 
          <button type="button" id="switchToSignup" style="background:none; border:none; color:#ff4d4d; text-decoration:underline; cursor:pointer;">Sign Up</button>
        </p>
      </form>
      <!-- Telegram Link Section on Auth Page -->
      <div id="authTelegram">
        <a href="https://t.me/birrmaker25" target="_blank">
          <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram">
          <span>birrmaker25</span>
        </a>
      </div>
    </div>

    <!-- Main Platform Section -->
    <div id="mainSection" class="hidden">
      <!-- Home Section with Sky Background and Dark Overlay -->
      <div id="homeSection" class="section" style="background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('https://source.unsplash.com/featured/?sky'); background-size: cover; color: white;">
        <h2>Home</h2>
        <div class="contact-icons">
          <a href="https://t.me/birrmaker25" target="_blank">
            <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram">
          </a>
        </div>
        <div id="homeContent" class="home-description">
          <h3>Welcome to BirrMaker Investment Platform</h3>
          <p>
            Experience a revolutionary investment solution tailored for modern investors.
            BirrMaker offers a secure, user‑friendly platform that empowers you to invest with confidence,
            track daily returns, and manage your funds effortlessly.
          </p>
          <p>
            Whether you are just starting your investment journey or looking to expand your portfolio,
            our platform provides real‑time insights, personalized strategies, and seamless management.
          </p>
          <h4>Our Vision</h4>
          <p>
            To empower every investor with the tools, knowledge, and opportunities needed to achieve financial independence.
          </p>
          <!-- Full Home Page Image Rows and Descriptions -->
          <div id="homeImages">
            <div class="image-row">
              <img src="https://picsum.photos/seed/invest1/200/150" alt="Investment Concept 1">
              <img src="https://picsum.photos/seed/invest2/200/150" alt="Investment Concept 2">
            </div>
            <p class="row-description">Modern technology meets investment opportunity – explore innovative platforms and digital insights.</p>
            <div class="image-row">
              <img src="https://picsum.photos/seed/invest3/200/150" alt="Investment Concept 3">
              <img src="https://picsum.photos/seed/invest4/200/150" alt="Investment Concept 4">
            </div>
            <p class="row-description">Harness data analytics and market trends to drive smarter financial decisions.</p>
            <div class="image-row">
              <img src="https://picsum.photos/seed/invest5/200/150" alt="Investment Concept 5">
              <img src="https://picsum.photos/seed/invest6/200/150" alt="Investment Concept 6">
            </div>
            <p class="row-description">Experience secure transactions and transparent fund management with confidence.</p>
            <div class="image-row">
              <img src="https://picsum.photos/seed/invest7/200/150" alt="Investment Concept 7">
              <img src="https://picsum.photos/seed/invest8/200/150" alt="Investment Concept 8">
            </div>
            <p class="row-description">Build a diversified portfolio using innovative investment strategies.</p>
            <div class="image-row">
              <img src="https://picsum.photos/seed/invest9/200/150" alt="Investment Concept 9">
              <img src="https://picsum.photos/seed/invest10/200/150" alt="Investment Concept 10">
            </div>
            <p class="row-description">Monitor your investments in real‑time with up‑to‑date performance tracking.</p>
            <div class="image-row">
              <img src="https://picsum.photos/seed/invest11/200/150" alt="Investment Concept 11">
              <img src="https://picsum.photos/seed/invest12/200/150" alt="Investment Concept 12">
            </div>
            <p class="row-description">Gain expert analysis and comprehensive market insights to empower your decisions.</p>
          </div>
          <div id="brandImages" style="margin-top:20px; display: flex; justify-content: space-around;">
            <img src="https://via.placeholder.com/150?text=BirrMaker+Logo" alt="BirrMaker Logo" style="width:45%; border-radius:8px;">
            <img src="https://via.placeholder.com/150?text=Company+House+Design" alt="Company House Design" style="width:45%; border-radius:8px;">
          </div>
        </div>
      </div>

      <!-- Product Section (standard product list) -->
      <div id="productSection" class="section hidden">
        <h2>Product</h2>
        <div id="productList"></div>
      </div>

      <!-- My Product Section with Intro Animation -->
      <div id="myProductSection" class="section hidden">
        <h2>My Product</h2>
        <!-- Intro Animation: Video container (replace 'rat-cat-video.mp4' with your video URL) -->
        <div id="myProductIntroAnimation">
          <video autoplay muted>
            <source src="rat-cat-video.mp4" type="video/mp4">
            Your browser does not support the video tag.
          </video>
          <div class="video-overlay">Buy Your Favorite Products Now!</div>
        </div>
        <!-- Content revealed after animation -->
        <div id="myProductContent" style="display:none;">
          <p>Purchased products will appear here.</p>
          <ul id="purchasedList"></ul>
        </div>
      </div>

      <!-- My Page Section -->
      <div id="myPageSection" class="section hidden">
        <h2>My Page</h2>
        <div style="margin-bottom:20px;">
          <h3 style="margin:0;">Balance: <span id="balance">80</span> birr</h3>
          <h4>Your ID: <span id="individualId">--------</span></h4>
        </div>
        <!-- My Account -->
        <div class="menuItem">
          <button class="toggleBtn">My Account</button>
          <div class="menuContent" id="myAccountContent">
            <h4>My Account Details</h4>
            <p>Phone: <span id="accountPhoneMasked">********</span></p>
            <p>Password: <span id="accountPasswordMasked">********</span></p>
            <p>ID: <span id="accountIdMasked">--------</span></p>
            <button id="toggleAccountDetails">Show Details</button>
          </div>
        </div>
        <!-- Withdraw -->
        <div class="menuItem">
          <button class="toggleBtn">Withdraw</button>
          <div class="menuContent" id="withdrawContent">
            <h4>Withdraw Funds</h4>
            <select id="withdrawBank">
              <option value="cbe">CBE</option>
              <option value="mpessa">Mpessa</option>
              <option value="telebirr">Telebirr</option>
            </select>
            <p style="font-weight:bold; color:#4CAF50;">Account Number: <span id="withdrawAccountNumber"></span></p>
            <label for="withdrawAccountInput" style="font-weight:bold; color:#4CAF50;">Enter Account Number:</label>
            <input type="text" id="withdrawAccountInput" placeholder="Enter account number" class="withdraw-input"/>
            <input type="number" id="withdrawAmount" placeholder="Amount" class="withdraw-input"/>
            <button id="confirmWithdraw">Confirm Withdraw</button>
            <p id="withdrawStatus" style="font-weight:bold; color:#4CAF50;"></p>
          </div>
        </div>
        <!-- Transaction -->
        <div class="menuItem">
          <button class="toggleBtn">Transaction</button>
          <div class="menuContent" id="transactionContent">
            <!-- Transaction history will be loaded here dynamically -->
          </div>
        </div>
        <!-- Referral -->
        <div class="menuItem">
          <button class="toggleBtn">Referral</button>
          <div class="menuContent" id="referralContent">
            <h4>Your Referral Link</h4>
            <input type="text" id="referralLink" readonly style="width: 80%; font-weight:bold; color:#4CAF50;" />
            <h4>Your Referral Team</h4>
            <p style="font-weight:bold; color:#4CAF50;">No referrals yet.</p>
          </div>
        </div>
        <!-- Support -->
        <div class="menuItem">
          <button class="toggleBtn">Support</button>
          <div class="menuContent" id="supportContent">
            <h4>Support</h4>
            <p style="font-weight:bold; color:#4CAF50;">If you need help, please contact our support team.</p>
            <button id="contactSupportBtn">Contact Support</button>
          </div>
        </div>
        <!-- Other Maker Menu -->
        <div class="menuItem">
          <button id="otherMakerBtn">Other Maker $</button>
        </div>
        <!-- Logout Button -->
        <div class="menuItem">
          <button id="logoutBtn">Logout</button>
        </div>
        <!-- Social Media Icons Under Logout -->
        <div class="social-icons">
          <a href="https://www.youtube.com/channel/YourChannel" target="_blank">
            <img src="https://cdn-icons-png.flaticon.com/512/1384/1384060.png" alt="YouTube">
          </a>
          <a href="https://www.tiktok.com/@yourprofile" target="_blank">
            <img src="https://cdn-icons-png.flaticon.com/512/3046/3046122.png" alt="TikTok">
          </a>
          <a href="https://www.instagram.com/yourprofile" target="_blank">
            <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" alt="Instagram">
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Fixed Bottom Navigation -->
  <nav id="bottomNav">
    <button data-section="homeSection">Home</button>
    <button data-section="productSection">Product</button>
    <button data-section="myProductSection">My Product</button>
    <button data-section="myPageSection">My Page</button>
  </nav>

  <!-- Payment Modal -->
  <div id="paymentModal" class="modalOverlay">
    <div class="modalContent">
      <h3>Choose Bank Method</h3>
      <button class="bankOption" data-bank="cbe">CBE</button>
      <button class="bankOption" data-bank="telebirr">Telebirr</button>
      <button class="bankOption" data-bank="mpessa">Mpessa</button>
      <div id="bankInfo" style="display: none; margin-top: 10px;">
        <p>
          <strong style="color: #4CAF50;">Account Number:</strong>
          <span id="accountNumber"></span>
          <button id="copyAccount">Copy</button>
        </p>
        <p>
          <strong style="color: #4CAF50;">Transaction ID:</strong><br/>
          <input type="text" id="tnxId" placeholder="Enter Tnx ID" class="modal-input"/>
        </p>
        <p><strong style="color: #4CAF50;">Upload Screenshot:</strong></p>
        <button id="toggleFileUpload" class="modal-input" style="background:#4CAF50; border:none; color:#fff; cursor:pointer;">Upload Screenshot</button>
        <div id="fileUploadContainer" style="display: none; margin-top: 10px;">
          <input type="file" id="screenshotInput" accept="image/*" class="modal-input"/>
        </div>
        <button id="submitPayment">Submit Payment</button>
        <button id="closeModal">Close</button>
      </div>
    </div>
  </div>

  <!-- Telegram Modal -->
  <div id="telegramModal" class="modalOverlay">
    <div class="modalContent">
      <h3>Payment Submitted!</h3>
      <p>
        Your payment details have been sent to Telegram <br/>
        <a href="https://t.me/birrmaker25" target="_blank" style="color: #ff4d4d; text-decoration: none;">@birrmaker25</a>
      </p>
      <button id="closeTelegramModal">Close</button>
    </div>
  </div>

  <script>
    // Helper: Generate a unique 10-digit ID
    function generateUniqueId() {
      let id;
      do {
        id = Math.floor(1000000000 + Math.random() * 9000000000).toString();
      } while (Object.values(users).some(user => user.individualId === id));
      return id;
    }

    // Global Users Storage and Current User
    let users = JSON.parse(localStorage.getItem('users') || '{}');
    let currentUser = null;
    const currentUserPhone = localStorage.getItem('currentUser');
    if(currentUserPhone && users[currentUserPhone]){
      currentUser = users[currentUserPhone];
    }
    const urlParams = new URLSearchParams(window.location.search);
    const refIdFromUrl = urlParams.get('refId');

    // INTRO COUNTDOWN
    let introCountdown = 5;
    const introSection = document.getElementById('introSection');
    const mainContainer = document.getElementById('mainContainer');
    const countdownEl = document.getElementById('countdown');
    const introInterval = setInterval(() => {
      introCountdown--;
      countdownEl.textContent = introCountdown;
      if (introCountdown <= 0) {
        clearInterval(introInterval);
        introSection.classList.add('hidden');
        mainContainer.classList.remove('hidden');
      }
    }, 1000);

    // SIGN UP / LOGIN LOGIC
    const signupForm = document.getElementById('signupForm');
    const signupPhone = document.getElementById('signupPhone');
    const signupPassword = document.getElementById('signupPassword');
    const signupConfirmPassword = document.getElementById('signupConfirmPassword');
    const signupError = document.getElementById('signupError');
    const loginForm = document.getElementById('loginForm');
    const loginPhone = document.getElementById('loginPhone');
    const loginPassword = document.getElementById('loginPassword');
    const loginError = document.getElementById('loginError');
    const authSection = document.getElementById('authSection');
    const mainSection = document.getElementById('mainSection');
    const bottomNav = document.getElementById('bottomNav');

    document.getElementById('switchToLogin').addEventListener('click', () => {
      signupForm.classList.add('hidden');
      loginForm.classList.remove('hidden');
    });
    document.getElementById('switchToSignup').addEventListener('click', () => {
      loginForm.classList.add('hidden');
      signupForm.classList.remove('hidden');
    });

    signupForm.addEventListener('submit', (e) => {
      e.preventDefault();
      signupError.textContent = '';
      const phone = signupPhone.value.trim();
      const pass = signupPassword.value.trim();
      const confirmPass = signupConfirmPassword.value.trim();
      
      if (!phone || !pass || !confirmPass) {
        signupError.textContent = 'Please fill all fields.';
        return;
      }
      
      const phoneRegex = /^(09|07)\d{8}$/;
      if (!phoneRegex.test(phone)) {
        signupError.textContent = 'Phone number must start with 09 or 07 and be 10 digits long.';
        return;
      }
      
      if (pass.length < 6) {
        signupError.textContent = 'Password must be at least 6 characters long.';
        return;
      }
      
      if (users[phone]) {
        signupError.textContent = 'This phone number is already registered and remains constant. Please sign in.';
        return;
      }
      
      // Generate a unique 10-digit ID for the user
      const newUser = {
        phone,
        password: pass,
        balance: 80,
        transactions: [{ type: 'bonus', amount: 80, description: 'Welcome Bonus' }],
        individualId: generateUniqueId(),
        signupTime: Date.now(),
        referrer: (refIdFromUrl && refIdFromUrl !== phone) ? refIdFromUrl : null,
        referralBonusApplied: false
      };

      // If there is a valid referrer, add this user to the referrer's team
      if (newUser.referrer) {
        let refUser = Object.values(users).find(user => user.individualId === newUser.referrer);
        if (refUser) {
          refUser.referrals = refUser.referrals || [];
          refUser.referrals.push(phone);
          localStorage.setItem('users', JSON.stringify(users));
        }
      }
      
      users[phone] = newUser;
      localStorage.setItem('users', JSON.stringify(users));
      currentUser = newUser;
      localStorage.setItem('currentUser', phone);
      
      authSection.classList.add('hidden');
      mainSection.classList.remove('hidden');
      bottomNav.style.display = 'flex';
      updateUI();
    });

    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      loginError.textContent = '';
      const phone = loginPhone.value.trim();
      const pass = loginPassword.value.trim();
      if (!phone || !pass) {
        loginError.textContent = 'Please fill all fields.';
        return;
      }
      if (!users[phone] || users[phone].password !== pass) {
        loginError.textContent = 'Phone or password not correct.';
        return;
      }
      currentUser = users[phone];
      localStorage.setItem('currentUser', phone);
      authSection.classList.add('hidden');
      mainSection.classList.remove('hidden');
      bottomNav.style.display = 'flex';
      updateUI();
    });

    function updateUI() {
      if (currentUser) {
        document.getElementById('balance').textContent = currentUser.balance;
        document.getElementById('individualId').textContent = currentUser.individualId;
        // Build referral link with the unique 10-digit ID
        const referralLink = window.location.origin + window.location.pathname + "?refId=" + currentUser.individualId;
        document.getElementById('referralLink').value = referralLink;
      }
    }
    
    if(currentUser) updateUI();

    // PRODUCT LIST & IMAGES
    const providedImages = [
      "https://assets.onecompiler.app/438xks8y6/43bnmtarn/1000006603.jpg",
      "https://assets.onecompiler.app/438xks8y6/43bnmtarn/1000006604.jpg",
      "https://assets.onecompiler.app/438xks8y6/43bnmtarn/1000006605.jpg",
      "https://assets.onecompiler.app/438xks8y6/43bnmtarn/1000006606.jpg",
      "https://assets.onecompiler.app/438xks8y6/43bnmtarn/1000006608.jpg"
    ];
    let productImages = providedImages.slice();
    for (let i = 6; i <= 20; i++) {
      productImages.push("https://picsum.photos/seed/product" + i + "/400/300");
    }
    const products = [];
    for (let i = 1; i <= 20; i++) {
      products.push({
        name: "Product " + i,
        price: i * 500,
        dailyIncome: i * 150,
        timeSet: "30 days"
      });
    }

    // NAVIGATION BETWEEN SECTIONS
    const navButtons = document.querySelectorAll('#bottomNav button');
    navButtons.forEach((btn) => {
      btn.addEventListener('click', () => {
        document.getElementById('homeSection').classList.add('hidden');
        document.getElementById('productSection').classList.add('hidden');
        document.getElementById('myProductSection').classList.add('hidden');
        document.getElementById('myPageSection').classList.add('hidden');
        const target = btn.getAttribute('data-section');
        document.getElementById(target).classList.remove('hidden');
        if (target === 'productSection') {
          loadProducts();
        }
        if (target === 'myProductSection') {
          // Show intro animation on My Product page for 5 seconds, then reveal content
          document.getElementById('myProductIntroAnimation').style.display = 'block';
          document.getElementById('myProductContent').style.display = 'none';
          setTimeout(() => {
            document.getElementById('myProductIntroAnimation').style.display = 'none';
            document.getElementById('myProductContent').style.display = 'block';
          }, 5000);
        }
      });
    });

    function loadProducts() {
      const productList = document.getElementById('productList');
      productList.innerHTML = '';
      products.forEach((product, index) => {
        const productDiv = document.createElement('div');
        productDiv.className = 'product';
        productDiv.innerHTML =
          '<img src="' + productImages[index] + '" alt="Product Image" />' +
          '<h4>' + product.name + '</h4>' +
          '<p>Price: ' + product.price + ' birr</p>' +
          '<p>Daily Income: ' + product.dailyIncome + ' birr</p>' +
          '<p>Duration: ' + product.timeSet + '</p>' +
          '<button class="payBtn" data-index="' + index + '">Pay</button>';
        productList.appendChild(productDiv);
      });
    }

    // PAYMENT MODAL
    const productListContainer = document.getElementById('productList');
    const paymentModal = document.getElementById('paymentModal');
    const bankInfo = document.getElementById('bankInfo');
    const accountNumberSpan = document.getElementById('accountNumber');
    const closeModalBtn = document.getElementById('closeModal');
    const submitPaymentBtn = document.getElementById('submitPayment');
    const tnxIdInput = document.getElementById('tnxId');
    const screenshotInput = document.getElementById('screenshotInput');
    const telegramModal = document.getElementById('telegramModal');
    const closeTelegramModalBtn = document.getElementById('closeTelegramModal');
    const bankDetails = {
      cbe: '1000666501456',
      telebirr: 'Not Available',
      mpessa: 'Not Available'
    };

    productListContainer.addEventListener('click', (e) => {
      if (e.target && e.target.className === 'payBtn') {
        paymentModal.style.display = 'flex';
      }
    });
    document.querySelectorAll('.bankOption').forEach((btn) => {
      btn.addEventListener('click', () => {
        const selectedBank = btn.getAttribute('data-bank');
        bankInfo.style.display = 'block';
        let accountNum = bankDetails[selectedBank] || "";
        if (selectedBank === 'telebirr' || selectedBank === 'mpessa') {
          accountNumberSpan.classList.add('blurred');
        } else {
          accountNumberSpan.classList.remove('blurred');
        }
        accountNumberSpan.innerText = accountNum;
        accountNumberSpan.setAttribute('data-full', bankDetails[selectedBank]);
      });
    });

    closeModalBtn.addEventListener('click', () => {
      paymentModal.style.display = 'none';
      bankInfo.style.display = 'none';
    });
    closeTelegramModalBtn.addEventListener('click', () => {
      telegramModal.style.display = 'none';
    });

    submitPaymentBtn.addEventListener('click', () => {
      const tnxId = tnxIdInput.value.trim();
      if (!tnxId) {
        alert("Please enter Transaction ID");
        return;
      }
      if (!tnxId.startsWith("FT")) {
        alert("Transaction ID must start with 'FT'");
        return;
      }
      if (screenshotInput.files.length === 0) {
        alert("Please upload a screenshot");
        return;
      }
      tnxIdInput.value = "";
      screenshotInput.value = "";
      bankInfo.style.display = 'none';
      paymentModal.style.display = 'none';
      telegramModal.style.display = 'flex';
      
      // Apply referral bonus if applicable
      if (currentUser && currentUser.referrer && !currentUser.referralBonusApplied) {
        let refUser = Object.values(users).find(user => user.individualId === currentUser.referrer);
        if (refUser) {
          refUser.balance = parseFloat(refUser.balance) + 70;
          refUser.transactions.push({ type: 'referral', amount: 70, description: 'Referral Bonus from ' + currentUser.individualId });
          localStorage.setItem('users', JSON.stringify(users));
          alert('Referral bonus granted to referrer (ID: ' + refUser.individualId + ')');
        }
        currentUser.referralBonusApplied = true;
        users[currentUser.phone] = currentUser;
        localStorage.setItem('users', JSON.stringify(users));
        updateUI();
      }
    });

    // WITHDRAW LOGIC
    const confirmWithdrawBtn = document.getElementById('confirmWithdraw');
    const withdrawAccountInput = document.getElementById('withdrawAccountInput');
    const withdrawAmount = document.getElementById('withdrawAmount');
    const withdrawStatus = document.getElementById('withdrawStatus');
    confirmWithdrawBtn.addEventListener('click', () => {
      const phoneNumber = currentUser ? currentUser.phone : "Unknown";
      const accNum = withdrawAccountInput.value.trim();
      const amt = parseFloat(withdrawAmount.value);
      if (amt <= 0) {
        alert('Please enter a valid amount');
        return;
      }
      if (amt < 150) {
        alert('Minimum withdrawal amount is 150 birr');
        return;
      }
      if (!accNum) {
        alert('Please enter a valid account number');
        return;
      }
      withdrawStatus.textContent = 'Processing withdrawal...';
      setTimeout(() => {
        withdrawStatus.textContent = 'Withdrawal complete. Sending notification...';
        const message = `Withdrawal Request:\nPhone: ${phoneNumber}\nAccount: ${accNum}\nAmount: ${amt} birr`;
        window.open(`https://t.me/share/url?url=@birrmaker25&text=${encodeURIComponent(message)}`, '_blank');
        withdrawStatus.textContent = 'Withdrawal complete. Please contact support on Telegram @birrmaker25';
      }, 8000);
    });

    // MY PAGE MENU & TRANSACTION HISTORY
    const toggleButtons = document.querySelectorAll('.toggleBtn');
    toggleButtons.forEach((btn) => {
      btn.addEventListener('click', () => {
        const contentDiv = btn.nextElementSibling;
        if (contentDiv.classList.contains('show')) {
          contentDiv.classList.remove('show');
        } else {
          contentDiv.classList.add('show');
          if (btn.textContent.trim() === 'Transaction') {
            loadTransactions();
          }
        }
      });
    });

    const toggleAccountDetailsBtn = document.getElementById('toggleAccountDetails');
    const accountPhoneMasked = document.getElementById('accountPhoneMasked');
    const accountPasswordMasked = document.getElementById('accountPasswordMasked');
    const accountIdMasked = document.getElementById('accountIdMasked');
    let detailsShown = false;
    toggleAccountDetailsBtn.addEventListener('click', () => {
      if (!detailsShown) {
        accountPhoneMasked.textContent = currentUser ? currentUser.phone : "";
        accountPasswordMasked.textContent = currentUser ? currentUser.password : "";
        accountIdMasked.textContent = currentUser ? currentUser.individualId : "";
        toggleAccountDetailsBtn.textContent = "Hide Details";
        detailsShown = true;
      } else {
        accountPhoneMasked.textContent = "********";
        accountPasswordMasked.textContent = "********";
        accountIdMasked.textContent = "--------";
        toggleAccountDetailsBtn.textContent = "Show Details";
        detailsShown = false;
      }
    });

    const contactSupportBtn = document.getElementById('contactSupportBtn');
    contactSupportBtn.addEventListener('click', () => {
      window.open("https://t.me/birrmaker25", "_blank");
    });

    // Other Maker Button: Opens Bitcoin Telegram bot link
    document.getElementById('otherMakerBtn').addEventListener('click', () => {
      window.open("http://t.me/get_free_bitcoin_daily_bot?start=7348979606", "_blank");
    });

    // Logout button functionality
    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('currentUser');
      currentUser = null;
      mainSection.classList.add('hidden');
      bottomNav.style.display = 'none';
      authSection.classList.remove('hidden');
    });

    function loadTransactions() {
      const transactionContent = document.getElementById('transactionContent');
      transactionContent.innerHTML = '';
      if (!currentUser || !currentUser.transactions || currentUser.transactions.length === 0) {
        transactionContent.innerHTML = '<p style="font-weight:bold; color:#4CAF50;">No transactions available.</p>';
        return;
      }
      const ul = document.createElement('ul');
      currentUser.transactions.forEach(t => {
        const li = document.createElement('li');
        li.textContent = `${t.description}: +${t.amount} birr`;
        ul.appendChild(li);
      });
      transactionContent.appendChild(ul);
    }

    // FILE UPLOAD TOGGLE
    const toggleFileUploadBtn = document.getElementById('toggleFileUpload');
    const fileUploadContainer = document.getElementById('fileUploadContainer');
    toggleFileUploadBtn.addEventListener('click', () => {
      fileUploadContainer.style.display = (fileUploadContainer.style.display === 'none' || fileUploadContainer.style.display === '') ? 'block' : 'none';
    });
  </script>
</body>
</html>
<!-- partial -->
  
</body>
</html>
